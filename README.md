# Реферальная система

Деплой сайта через [PythonAnyWhere](https://glebvi1.pythonanywhere.com/users/login/)

Пример использования через [Postman](https://www.postman.com/glebvi/workspace/my-workspace/collection/29233025-64513366-e014-40bd-ab17-3fda9a521a8d?action=share&source=copy-link&creator=29233025)

[Ссылка на ТЗ](https://disk.yandex.ru/i/EBpO6WgWcbcHoQ)

## Описание
### Авторизация
**Адрес:** /user/login/ [POST]

**Пример запроса:** {"phone_number": "80001112233"}

Обязательное поле: phone_number номер телефона в виде +70001112233 или 80001112233
В БД сохраняется 80001112233 (первый вариант преобразовывается). В дальнейшем можно использовать как через +7, так и через 8

За авторизацию отвечает отдельный класс authentication.PhoneAuthentication, который наследуется от BaseAuthentication.
PhoneAuthentication использует базовый метод authenticate из django.contrib.auth. Он переписан в файле backends.

Так как используется BaseAuthentication, то номер телефона нужно отправлять при каждом запросе.

После авторизации сервер задерживается на 2 секунды и сохраняет в БД 4-х значный код.

### Подтверждение кода авторизации
**Адрес:** /user/verify/[int:user_id] [POST]

**Пример запроса:** {"phone_number": "80001112233", "auth_code": ...}

Если авторизация прошла успешно, то вернется код авторизации. Его нужно ввести. После этого можно переходить на профиль.

### Профиль
**Адрес:** /user/profile/ [GET]

**Пример запроса:** {"phone_number": "80001112233"}

Показывается профиль пользователя. Если пользователь уже использовал инвайт код, то он увидит номер телефона пользователя, чей инвайт код он вводил.

### Использование инвайт кода
**Адрес:** /user/use_invite_code/ [POST]

**Пример запроса:** {"phone_number": "80001112233", "invite_code": ...}

Введите инвайт код какого-нибудь пользователя.

Можно ввести инвай код только одного пользователя.
Один и тот же инвайт код можно вводить неограниченное кол-во раз.

После первого ввода, в профиле появиться инвайтор.

### Просмотр инвайтеров
**Адрес:** /user/list_inviters/ [POST]

**Пример запроса:** {"phone_number": "80001112233"}

Список весь пользователей, которые ввели Ваш инвайт код.

## Используемые технологии
1. Django Rest Framework
2. PostgreSQL
